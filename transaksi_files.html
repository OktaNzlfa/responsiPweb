<!DOCTYPE html>
<!-- saved from url=(0044)http://localhost/ResponsiPweb/transaksi.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POM Bensin - Transaksi</title>
    <link rel="stylesheet" href="./transaksi_files_files/sweetalert2.min.css">
    <link rel="stylesheet" href="./transaksi_files_files/str.css">
</head>
<body>
    <div class="container">

        <a href="http://localhost/ResponsiPweb/index.html">
        <img src="./transaksi_files_files/back.png" id="back">
        </a>

        <div class="form">
            <h1>TRANSAKSI</h1>

            <form id="pelangganForm" style="display: block;" action="http://localhost/ResponsiPweb/transaksi.html" method="POST">
                <h5>Tanggal</h5>
                <input type="date" name="tanggal">

                <h5>Jenis Bensin</h5>
                <select id="jenis_bensin" name="jenis_bensin">
                    <option value="">Pilih...</option>
                    <option value="pertalite">Bensin Pertalite (Rp.10.000/liter)</option>
                    <option value="bensin-premium">Bensin Premium (Rp.13.000/liter)</option>
                    <option value="solar">Solar/Diesel (Rp.18.000/liter)</option>
                </select>

                <h5>Harga per liter (Rp)</h5>
                <input type="number" name="harga" required="" step="any"><br>
        
                <h5>Jumlah liter</h5>
                <input type="number" name="liter" required="" step="any"><br><br>
        
                <button type="submit" value="Hitung Total">Total</button>

                <?php
                    // Menghitung total pembelian
                            $total_pembelian = $harga_per_liter * $jumlah_liter;
                            $output = date('y-m-d', strtotime($tanggal)) . "|" . $bensin . "|" . $harga_per_liter . "|" . $jumlah_liter . "|" . number_format($total_pembelian, 3) . "|";

                            echo "<h3>Total Pembelian Bensin:</h3>";
                            echo "<p>Tanggal : " . date($tanggal). "</p>";
                            echo "<p>Jenis Bensin: " . $bensin . "</p>";
                            echo "<p>Harga per liter: Rp " . number_format($harga_per_liter, 3) . "</p>";
                            echo "<p>Jumlah liter: " . number_format($jumlah_liter, 3) . "</p>";
                            echo "<h4>Total: Rp " . number_format($total_pembelian, 3) . "</h4>";

                        // Menampilkan data transaksi ke layar
                            echo "<p>Data transaksi:</p>";
                            echo "<pre>" . $output . "</pre>";

                        // Menyimpan ke dalam file.txt
                            $file = 'data.txt';
                            if (file_put_contents($file, $output . "\n", FILE_APPEND | LOCK_EX) !== false) {
                                echo "<p>Transaksi berhasil disimpan ke data.txt.</p>";
                            } else {
                                echo "<p style='color: red;'>Gagal menyimpan transaksi ke data.txt.</p>";
                            }
                ?>

                <h3>Total Pembelian Bensin:</h3><p>Tanggal : 2424-03-13</p><p>Jenis Bensin: Bensin Pertalite (Rp.10.000/liter)</p><p>Harga per liter: Rp 10.000</p><p>Jumlah liter: 15.000</p><h4>Total: Rp 150.000</h4><p>Data transaksi:</p><pre>24-03-13|Bensin Pertalite (Rp.10.000/liter)|10.000|15|150.000|</pre><p>Transaksi berhasil disimpan ke data.txt.</p>                
            </form><br>

            <h1>TERIMAKASIH</h1>
        </div>
        <a href="http://localhost/ResponsiPweb/laporan.html"><h2>Lihat Laporan</h2></a>
    </div>


</body></html>